<div class="chart-wrapper" style="width:100%; height: 100%">
    <div ng-if="vm.pca" class="chart-inner" style="width:100%; height: 100%">
        <div ng-show="vm.showWidget" style="display: flex; width: 100%; height: 100%;">
            <div id="containerData{{vm.widget.Id}}" style="height: 100%; border-right: 1px solid gray;">


                <div id="accordion{{vm.widget.Id}}" style="height: 100%; width:{{vm.widget.WidgetResource.SplitLeftPercentage}}">
                    <div class="group">


                        <h3 style="height: 20px; padding-top: 3px; font-size: .9em;">
                            Raw Data
                            <div ng-if="vm.pca" class='btn-toolbar pull-right' style="display: -webkit-inline-box;">
                                <!--<div class="btn-group">

                                    <a ng-click="vm.SetTagOrderByCustom(); $event.stopPropagation();" style="color: black; margin-top: -4px;" class="btn btn-default responsive-button tiny-button" ng-class="{'radio-active': vm.tagOrderByCustom}" title="Sort Tgas by my Set Order">
                                        Custom Order
                                    </a>
                                </div>-->





                            </div>
                        </h3>
                        <div style="overflow-y: auto; height: 100%;">
                            <table class="table table-condensed table-striped" style="font-family: Segoe UI; font-size: .8em;">
                                <thead>
                                    <tr>
                                        <th style="cursor: pointer;"
                                            nowrap
                                            ng-click="vm.SetSortField('JBTStandardObservation.Name')">
                                            <div>
                                                Name
                                                <span ng-show="vm.widget.displaySettings.tagDataSortField=='-JBTStandardObservation.Name'">
                                                    <i class="fa fa-sort-numeric-desc" title="Click to sort in descending order"></i>
                                                </span>
                                                <span ng-show="vm.widget.displaySettings.tagDataSortField=='JBTStandardObservation.Name'">
                                                    <i class="fa fa-sort-numeric-asc" title="Click to sort in ascending order"></i>
                                                </span>
                                            </div>
                                        </th>
                                        <th style="cursor: pointer;"
                                            nowrap
                                            ng-click="vm.SetSortField('LastObservationDate')">
                                            <div>
                                                Date
                                                <span ng-show="vm.widget.displaySettings.tagDataSortField=='-LastObservationDate'">
                                                    <i class="fa fa-sort-numeric-desc" title="Click to sort in descending order"></i>
                                                </span>
                                                <span ng-show="vm.widget.displaySettings.tagDataSortField=='LastObservationDate'">
                                                    <i class="fa fa-sort-numeric-asc" title="Click to sort in ascending order"></i>
                                                </span>
                                            </div>
                                        </th>
                                        <th>
                                            Value
                                        </th>

                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="tag in vm.pca.Tags | orderBy: vm.widget.displaySettings.tagDataSortField" style="background-color: {{tag.Metadata.Status.LastValueWasHistorical ? 'rgba(173, 173, 173,' : 'rgba(0, 255, 0,'}} .{{tag.Metadata.UpdateCountDowns.OneSecond}});">
                                        <td>
                                            <label ng-click="vm.ProcessTagsToGraph()" class="btn btn-default" style="height: 15px; max-height: 15px; font-size: .7em; width: 15px; max-width: 15px; padding: 0; padding-top: 2px; margin-top: -2px;" ng-model="vm.tagsToGraph[tag.TagId]" uib-btn-checkbox="{{tag.TagId}}">
                                                <i class="fa fa-line-chart" aria-hidden="true" title="Add to graph widget" style="cursor: pointer;"></i>
                                            </label>
                                            {{tag.JBTStandardObservation.Name}}
                                        </td>
                                        <td nowrap>
                                            {{tag.LastObservationDate | date:'MM/dd HH:mm:ss'}}
                                        </td>
                                        <td>
                                            {{tag.LastObservationTextValue}}
                                        </td>
                                    </tr>
                                </tbody>

                            </table>
                        </div>
                    </div>
                    <div class="group">
                        <h3  style="height: 20px; padding-top: 3px;  font-size: .9em;">Temperatures Graph</h3>
                        <div>
                            <p>Sed non urna. Donec et ante. Phasellus eu ligula. Vestibulum sit amet purus. Vivamus hendrerit, dolor at aliquet laoreet, mauris turpis porttitor velit, faucibus interdum tellus libero ac justo. Vivamus non quam. In suscipit faucibus urna. </p>
                        </div>
                    </div>
                </div>


            </div>
            <div id="containerGraphics{{vm.widget.Id}}" style="height: 100%;">
                <div style="position: relative; height: 100%; width: 100%;">


                    <img src="images/Blank-Placeholder.png" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" />
                    <img ng-src="{{vm.pca.BaseUnitImageURL}}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" />
                    <div ng-repeat="image in vm.AssetGraphics">
                        <img ng-if="image.showImage" ng-src="{{image.ImageURL}}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" />
                    </div>
                    <div ng-if="vm.widget.displaySettings.obscureGraphics" style="position: absolute;top: 0px;left: 0px;height:100%;width:100%;background: #FFF;z-index: 3;opacity: 0.85;"></div>
                </div>
            </div>

        </div>
    </div>
</div>













<!--Settings Form Below-->


<div class="panel panel-info" style="display: none; position: fixed; z-index: 30; left: 20px; top: 0; width: 90%; border: 3px solid darkcyan;" id="widget-settings-{{vm.widget.WidgetResource.Id}}">

    <div class="panel-heading" style="min-height: 20px;">
        Asset Settings for {{vm.widget.Name}}
    </div>
    <div class="panel-body" style="overflow-x: hidden; background: linear-gradient(to bottom,#bebebe, #eeeeee);">
        <form class="form-horizontal" role="form" name="userForm" id="userForm" novalidate>
            <div class="row" style="padding: 20px;">


                <!-- Site - If the user has access to more than one -->
                <div class="form-group">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Site
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="site in vm.userSites" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.SiteId" uib-btn-radio="{{site.Id}}">{{site.Name}}</label>
                    </div>
                </div>




                <!-- Site Terminals (if more than one) -->
                <div class="form-group" ng-show="vm.terminals.length > 0">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Terminal
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="terminalSystem in vm.terminals" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.TerminalSystemId" uib-btn-radio="{{terminalSystem.Id}}">{{terminalSystem.Name}}</label>
                    </div>
                </div>

                <!-- Terminal Zones (if more than one) -->
                <div class="form-group" ng-show="vm.zones && vm.zones.length > 0">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Zone
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="zoneSystem in vm.zones" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.ZoneSystemId" uib-btn-radio="{{zoneSystem.Id}}">{{zoneSystem.Name}}</label>
                    </div>
                </div>

                <!-- Zone Gates (if more than one) -->
                <div class="form-group" ng-show="vm.gates && vm.gates.length > 0">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Gate
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="gateSystem in vm.gates" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.GateSystemId" uib-btn-radio="{{gateSystem.Id}}">{{gateSystem.Name}}</label>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>


<div class="panel panel-info" style="display: none; position: fixed; z-index: 30; left: 20px; top: 0; width: 90%; border: 3px solid darkcyan;" id="widget-linegraph-{{vm.widget.WidgetResource.Id}}">

    <div class="panel-heading" style="min-height: 20px;">
        History Graph for {{vm.tagToGraph}}
    </div>
    <div class="panel-body" style="overflow-x: hidden;" id="widget-linegraph-highcharts-container-{{vm.widget.Id}}">
        Graph....................
    </div>
</div>


