<div style="display: flex; width: 100%; height: 40%;">
    <div ng-class="{ 'pulsing': vm.alarms.length > 0}" style="flex-basis: 20%; width: 20%; height: 40%; font-size: 3.75vw; font-weight: bold; text-align: center;">
        {{vm.alarms.length}}
    </div>
    <div id="containerBhsBagJamsWithHistoryChart{{vm.widget.Id}}" style="flex-basis: 80%; width: 80%; height: 10%;">
        Loading.....
    </div>

</div>
<div style="width: 100%; height: 60%; border-top: 1px solid gray; overflow-y: auto;">
    <div ng-show="vm.alarms" style="width: 100%;" id="lower-table-{{vm.widget.Id}}">
        <table class="table table-hover table-condensed">
            <thead style="font-size: .8em;">
                <tr>



                    <th style="cursor: pointer;"
                        nowrap
                        ng-click="vm.SetSortField('ActiveDateTime')">
                        <div>
                            Date
                            <span ng-show="vm.sortField=='-ActiveDateTime'">
                                <i class="fa fa-sort-numeric-desc" title="Click to sort in ascending order"></i>
                            </span>
                            <span ng-show="vm.sortField=='ActiveDateTime'">
                                <i class="fa fa-sort-numeric-asc" title="Click to sort in ascending order"></i>
                            </span>
                        </div>
                    </th>

                    <th style="cursor: pointer;"
                        nowrap
                        ng-click="vm.SetSortField('DeviceName')">
                        <div>
                            Device
                            <span ng-show="vm.sortField=='-DeviceName'">
                                <i class="fa fa-sort-alpha-desc" title="Click to sort in ascending order"></i>
                            </span>
                            <span ng-show="vm.sortField=='DeviceName'">
                                <i class="fa fa-sort-alpha-asc" title="Click to sort in ascending order"></i>
                            </span>
                        </div>
                    </th>

                    <th style="cursor: pointer;"
                        nowrap
                        ng-click="vm.SetSortField('Location')">
                        <div>
                            Location
                            <span ng-show="vm.sortField=='-Location'">
                                <i class="fa fa-sort-alpha-desc" title="Click to sort in ascending order"></i>
                            </span>
                            <span ng-show="vm.sortField=='Location'">
                                <i class="fa fa-sort-alpha-asc" title="Click to sort in ascending order"></i>
                            </span>
                        </div>



                    <th style="cursor: pointer;"
                        nowrap
                        ng-click="vm.SetSortField('AcknowledgeTime')">
                        <div>
                            Ack Time
                            <span ng-show="vm.sortField=='-AcknowledgeTime'">
                                <i class="fa fa-sort-numeric-desc" title="Click to sort in ascending order"></i>
                            </span>
                            <span ng-show="vm.sortField=='AcknowledgeTime'">
                                <i class="fa fa-sort-numeric-asc" title="Click to sort in ascending order"></i>
                            </span>
                        </div>
                    </th>

                    </th>
                    <th style="cursor: pointer;"
                        nowrap
                        ng-click="vm.SetSortField('TransactionType')">
                        <div>
                            Status
                            <span ng-show="vm.sortField=='-TransactionType'">
                                <i class="fa fa-sort-alpha-desc" title="Click to sort in ascending order"></i>
                            </span>
                            <span ng-show="vm.sortField=='TransactionType'">
                                <i class="fa fa-sort-alpha-asc" title="Click to sort in ascending order"></i>
                            </span>
                        </div>
                    </th>

                    <th style="cursor: pointer;"
                        nowrap
                        ng-click="vm.SetSortField('Duration')">
                        <div>
                            Duration
                            <span ng-show="vm.sortField=='-Duration'">
                                <i class="fa fa-sort-numeric-desc" title="Click to sort in ascending order"></i>
                            </span>
                            <span ng-show="vm.sortField=='Duration'">
                                <i class="fa fa-sort-numeric-asc" title="Click to sort in ascending order"></i>
                            </span>
                        </div>
                    </th>


                </tr>
            </thead>
            <tbody style="font-size: .75em; overflow-y: scroll;">
                <tr ng-repeat="alarm in vm.alarms | orderBy: vm.sortField track by $index" title="{{alarm.BHSName}}" class="no-select">
                    <td nowrap>{{alarm.ActiveDateTime | date:'MM/dd HH:mm:ss'}}</td>
                    <td nowrap>{{alarm.DeviceName}}</td>
                    <td nowrap>{{alarm.Location}}</td>
                    <td nowrap>{{alarm.AcknowledgeTime | date:'MM/dd HH:mm:ss'}}</td>
                    <td nowrap>{{alarm.TransactionType}}</td>
                    <td nowrap ng-if="!alarm.ReturnToNormalTime && (alarm.TransactionType == 'Alarm Active' || alarm.TransactionType == 'Alarm Acknowledged')">
                        <span style="color: red; font-size: 1.5em; font-weight: bold;">{{alarm.Duration}}</span>
                    </td>
                    <td nowrap ng-if="!(!alarm.ReturnToNormalTime && (alarm.TransactionType == 'Alarm Active' || alarm.TransactionType == 'Alarm Acknowledged'))">
                        {{alarm.Duration}}
                    </td>
                </tr>
            </tbody>
        </table>

    </div>
</div>

