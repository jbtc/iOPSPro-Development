<div class="chart-wrapper" style="width:100%; height: 100%" ng-click="vm.OpenSettingsIfNoAssetAndCloseIfAssetIsPresent()">
    <div class="chart-inner" style="width:100%; height: 100%">
        <div style="display: flex; width: 100%; height: 100%;">
            <div class="container" id="containerData{{vm.widget.Id}}" style="font-size .8em; height 100%; width:{{vm.widget.WidgetResource.SplitLeftPercentage}}%; padding-left: 0; padding-right: 0;">

                <ul class="nav nav-pills" id="nav-pills{{vm.widget.Id}}" style="font-size: .7em; padding-bottom: 5px; border-bottom: 1px solid lightgray;">
                    <li class="active"><a data-toggle="pill" ng-click="vm.GenerateTemperatureCharts()" href="#temperature{{vm.widget.Id}}">Temp</a></li>
                    <li><a data-toggle="pill" ng-click="vm.GeneratePressureCharts()" href="#pressure{{vm.widget.Id}}">Press</a></li>
                    <li><a data-toggle="pill" href="#home{{vm.widget.Id}}">Data</a></li>
                </ul>

                <div class="tab-content" id="tab-content{{vm.widget.Id}}" style="font-family: Segoe UI; font-size: .8em; overflow-y: auto; height: 100px;">
                    <div id="temperature{{vm.widget.Id}}" class="tab-pane in active" style="height: 100%; padding-bottom: 5px; overflow: hidden;">
                        <div class="flex-container" id="temperature-flex-container{{vm.widget.Id}}">
                            <div id="temperature-meters{{vm.widget.Id}}" style="flex-basis: 100%; height: 100%; border: 3px solid white; overflow: hidden;">
                                <linear-meter ng-if="vm.ambientDataTag" 
                                              min-scale="-30"
                                              max-scale="120"
                                              low-range-start-value="-30"
                                              low-range-end-value="32"
                                              low-range-active-color="blue"
                                              high-range-active-color="red"
                                              normal-range-active-color="lightGreen"
                                              high-range-start-value="95"
                                              high-range-end-value="120"
                                              label="Ambient Air Temperature"
                                              current-value="vm.ambientAirTemperature"></linear-meter>
                                <linear-meter ng-if="vm.dischargeDataTag" 
                                              min-scale="-30"
                                              max-scale="120"
                                              low-range-start-value="-30"
                                              low-range-end-value="32"
                                              low-range-active-color="blue"
                                              high-range-active-color="red"
                                              normal-range-active-color="lightGreen"
                                              high-range-start-value="95"
                                              high-range-end-value="120"
                                              label="Discharge Air Temperature"
                                              current-value="vm.dischargeAirTemperature"></linear-meter>
                                <linear-meter ng-if="vm.cabinDataTag" 
                                              min-scale="-30"
                                              max-scale="120"
                                              low-range-start-value="-30"
                                              low-range-end-value="32"
                                              low-range-active-color="blue"
                                              high-range-active-color="red"
                                              normal-range-active-color="lightGreen"
                                              high-range-start-value="95"
                                              high-range-end-value="120"
                                              label="Cabin Air Temperature"
                                              current-value="vm.cabinAirTemperature"></linear-meter>
                            </div>

                        </div>

                    </div>
                    <div id="pressure{{vm.widget.Id}}" class="tab-pane fade" style="height: 100%; padding-bottom: 5px; overflow: hidden;">
                        <div class="flex-container">
                            <div id="pressure-meters{{vm.widget.Id}}" style="flex-basis: 100%; height: 100%; border: 3px solid white; overflow: hidden;">
                                <linear-meter ng-if="vm.primary1CompressorDataTag"
                                              min-scale="50"
                                              max-scale="500"
                                              low-range-start-value="50"
                                              low-range-end-value="115"
                                              low-range-active-color="blue"
                                              high-range-active-color="red"
                                              normal-range-active-color="lightGreen"
                                              high-range-start-value="400"
                                              high-range-end-value="500"
                                              label="Pri Compr 1 Pressure"
                                              current-value="vm.primary1CompressorPressure"></linear-meter>
                                <linear-meter ng-if="vm.primary2CompressorDataTag"
                                              min-scale="50"
                                              max-scale="500"
                                              low-range-start-value="50"
                                              low-range-end-value="115"
                                              low-range-active-color="blue"
                                              high-range-active-color="red"
                                              normal-range-active-color="lightGreen"
                                              high-range-start-value="400"
                                              high-range-end-value="500"
                                              label="Pri Compr 2 Pressure"
                                              current-value="vm.primary2CompressorPressure"></linear-meter>
                                <linear-meter ng-if="vm.secondary1CompressorDataTag"
                                              min-scale="50"
                                              max-scale="500"
                                              low-range-start-value="50"
                                              low-range-end-value="115"
                                              low-range-active-color="blue"
                                              high-range-active-color="red"
                                              normal-range-active-color="lightGreen"
                                              high-range-start-value="400"
                                              high-range-end-value="500"
                                              label="Sec Compr 1 Pressure"
                                              current-value="vm.secondary1CompressorPressure"></linear-meter>
                                <linear-meter ng-if="vm.secondary2CompressorDataTag"
                                              min-scale="50"
                                              max-scale="500"
                                              low-range-start-value="50"
                                              low-range-end-value="115"
                                              low-range-active-color="blue"
                                              high-range-active-color="red"
                                              normal-range-active-color="lightGreen"
                                              high-range-start-value="400"
                                              high-range-end-value="500"
                                              label="Sec Compr 2 Pressure"
                                              current-value="vm.secondary2CompressorPressure"></linear-meter>
                            </div>

                        </div>
                    </div>
                    <div id="home{{vm.widget.Id}}" class="tab-pane fade" style="overflow: auto;">
                        
                        <table class="table table-condensed table-striped" style="font-family: Segoe UI; font-size: .8em;">
                            <thead>
                                <tr>
                                    <th style="cursor: pointer;"
                                        nowrap
                                        ng-click="vm.SetSortField('JBTStandardObservation.Name')">
                                        <div>
                                            Name
                                            <span ng-show="vm.widget.displaySettings.tagDataSortField=='-JBTStandardObservation.Name'">
                                                <i class="fa fa-sort-numeric-desc" title="Click to sort in descending order"></i>
                                            </span>
                                            <span ng-show="vm.widget.displaySettings.tagDataSortField=='JBTStandardObservation.Name'">
                                                <i class="fa fa-sort-numeric-asc" title="Click to sort in ascending order"></i>
                                            </span>
                                        </div>
                                    </th>
                                    <th style="cursor: pointer;"
                                        nowrap
                                        ng-click="vm.SetSortField('PLCLocalDate')">
                                        <div>
                                            Date
                                            <span ng-show="vm.widget.displaySettings.tagDataSortField=='-PLCLocalDate'">
                                                <i class="fa fa-sort-numeric-desc" title="Click to sort in descending order"></i>
                                            </span>
                                            <span ng-show="vm.widget.displaySettings.tagDataSortField=='PLCLocalDate'">
                                                <i class="fa fa-sort-numeric-asc" title="Click to sort in ascending order"></i>
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        Value
                                    </th>

                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="tag in vm.pca.Tags | orderBy: vm.widget.displaySettings.tagDataSortField" style="background-color: {{tag.Metadata.Status.LastValueWasHistorical ? 'rgba(173, 173, 173,' : 'rgba(0, 255, 0,'}} .{{tag.Metadata.UpdateCountDowns.OneSecond}});">
                                    <td>
                                        <label ng-click="vm.ProcessTagsToGraph()" class="btn btn-default" style="height: 15px; max-height: 15px; font-size: .7em; width: 15px; max-width: 15px; padding: 0; padding-top: 2px; margin-top: -2px;" ng-model="vm.tagsToGraph[tag.TagId]" uib-btn-checkbox="{{tag.TagId}}">
                                            <i class="fa fa-line-chart" aria-hidden="true" title="Add to graph widget" style="cursor: pointer;"></i>
                                        </label>
                                        {{tag.JBTStandardObservation.Name}}
                                    </td>
                                    <td nowrap>
                                        {{tag.PLCLocalDate | date:'MM/dd HH:mm:ss'}}
                                    </td>
                                    <td>
                                        {{tag.Value}}

                                    </td>
                                </tr>
                            </tbody>

                        </table>
                    </div>

                </div>
            </div>


            <div id="containerGraphics{{vm.widget.Id}}" style="height: 100%;">
                <div style="position: relative; height: 100%; width: 100%;">


                    <img src="images/Blank-Placeholder.png" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" />
                    <img ng-src="{{vm.pca.BaseUnitImageURL}}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" />
                    <div ng-repeat="image in vm.AssetGraphics">
                        <img ng-if="image.showImage" ng-src="{{image.ImageURL}}" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" />
                    </div>
                    <div ng-if="vm.widget.displaySettings.obscureGraphics" style="position: absolute;top: 0px;left: 0px;height:100%;width:100%;background: #FFF;z-index: 3;opacity: 0.80;"></div>
                </div>
            </div>

        </div>
    </div>
</div>













<!--Settings Form Below-->


<div class="panel panel-info" style="display: none; position: fixed; z-index: 30; left: 20px; top: 0; width: 90%; border: 3px solid darkcyan;" id="widget-settings-{{vm.widget.WidgetResource.Id}}">

    <div class="panel-heading" style="min-height: 20px;">
        Asset Settings for {{vm.widget.Name}}
    </div>
    <div class="panel-body" style="overflow-x: hidden; background: linear-gradient(to bottom,#bebebe, #eeeeee);">
        <form class="form-horizontal" role="form" name="userForm" id="userForm" novalidate>
            <div class="row" style="padding: 20px;">


                <!-- Site - If the user has access to more than one -->
                <div class="form-group">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Site
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="site in vm.userSites" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.SiteId" uib-btn-radio="{{site.Id}}">{{site.Name}}</label>
                    </div>
                </div>




                <!-- Site Terminals (if more than one) -->
                <div class="form-group" ng-show="vm.terminals.length > 0">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Terminal
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="terminalSystem in vm.terminals" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.TerminalSystemId" uib-btn-radio="{{terminalSystem.Id}}">{{terminalSystem.Name}}</label>
                    </div>
                </div>

                <!-- Terminal Zones (if more than one) -->
                <div class="form-group" ng-show="vm.zones && vm.zones.length > 0">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Zone
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="zoneSystem in vm.zones" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.ZoneSystemId" uib-btn-radio="{{zoneSystem.Id}}">{{zoneSystem.Name}}</label>
                    </div>
                </div>

                <!-- Zone Gates (if more than one) -->
                <div class="form-group" ng-show="vm.gates && vm.gates.length > 0">
                    <label class="col-sm-{{vm.bootstrapLabelColumns}} control-label innovation-right-aligned">
                        Gate
                    </label>
                    <div class="col-sm-{{vm.bootstrapInputColumns}}">
                        <label ng-repeat="gateSystem in vm.gates" style="margin: 1px;" class="btn btn-default" ng-model="vm.widget.WidgetResource.GateSystemId" uib-btn-radio="{{gateSystem.Id}}">{{gateSystem.Name}}</label>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>


<div class="panel panel-info" style="display: none; position: fixed; z-index: 30; left: 20px; top: 0; width: 90%; border: 3px solid darkcyan;" id="widget-linegraph-{{vm.widget.WidgetResource.Id}}" ng-click="vm.CloseSettings()">

    <div class="panel-heading" style="min-height: 20px;">
        History Graph for {{vm.tagToGraph}}
    </div>
    <div class="panel-body" style="overflow-x: hidden;" id="widget-linegraph-highcharts-container-{{vm.widget.Id}}">
        Graph....................
    </div>
</div>


